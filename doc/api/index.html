<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="archery API docs, for the Dart programming language.">
  <title>archery - Dart API docs</title>


  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
  
  <link rel="stylesheet" href="static-assets/github.css?v1">
  <link rel="stylesheet" href="static-assets/styles.css?v1">
  <link rel="icon" href="static-assets/favicon.png?v1">
  
</head>

<body data-base-href="" data-using-base-href="false" class="light-theme">
<div id="overlay-under-drawer"></div>
<header id="title">
  <span id="sidenav-left-toggle" class="material-symbols-outlined" role="button" tabindex="0">menu</span>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li class="self-crumb">archery package</li>
  </ol>
  <div class="self-name">archery</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
  <button class="toggle" id="theme-button" title="Toggle between light and dark mode" aria-label="Light and dark mode toggle">
    <span id="dark-theme-button" class="material-symbols-outlined" aria-hidden="true">
      dark_mode
    </span>
    <span id="light-theme-button" class="material-symbols-outlined" aria-hidden="true">
      light_mode
    </span>
  </button>
</header>
<main>
  <div id="dartdoc-main-content" class="main-content">
      
<section class="desc markdown">
  <hr>
<h1 id="archery">Archery</h1>
<p>A Laravel-inspired, Dart-native web framework built directly on <code>dart:io</code>.</p>
<p>Archery is a <strong>stable alpha / early-production framework</strong> focused on clarity, explicit architecture, and batteries-included fundamentals:</p>
<ul>
<li>IoC container</li>
<li>Provider-based lifecycle</li>
<li>HTTP kernel + middleware pipeline</li>
<li>Router with groups and typed parameters</li>
<li>Blade-style templating</li>
<li>Multi-driver ORM (JSON, SQLite, Postgres, S3)</li>
<li>Session-based authentication</li>
<li>CSRF protection</li>
<li>Static file serving</li>
</ul>
<p>Archery is suitable for real deployments, and is still actively hardening and evolving toward a 2.0 production-focused milestone.</p>
<hr>
<h2 id="philosophy">Philosophy</h2>
<p>Archery aims to be:</p>
<ul>
<li><strong>Explicit over magical</strong></li>
<li><strong>Framework, not micro-router</strong></li>
<li><strong>Dart-native</strong></li>
<li><strong>Readable and hackable</strong></li>
<li><strong>Opinionated but small</strong></li>
</ul>
<p>It does not wrap another server framework. It is built directly on <code>dart:io</code>.</p>
<hr>
<h1 id="architecture-overview">Architecture Overview</h1>
<p>Archery follows a layered request lifecycle:</p>
<pre class="language-dart"><code>Incoming Request
   ↓
dart:io HTTP Server
   ↓
HTTP Kernel
   ↓
Middleware Pipeline
   ↓
Router
   ↓
Controller
   ↓
Response
</code></pre>
<p>Core architectural components:</p>
<ul>
<li><strong>Application</strong> – central orchestrator</li>
<li><strong>Service Providers</strong> – register and boot services</li>
<li><strong>IoC Container</strong> – dependency resolution</li>
<li><strong>HTTP Kernel</strong> – request handling entry point</li>
<li><strong>Middleware</strong> – request/response pipeline</li>
<li><strong>Router</strong> – route matching and dispatch</li>
<li><strong>Controllers</strong> – application logic</li>
<li><strong>Models</strong> – ORM-backed data layer</li>
<li><strong>Views</strong> – templated HTML rendering</li>
</ul>
<hr>
<h1 id="core-features">Core Features</h1>
<h2 id="http-layer">HTTP Layer</h2>
<ul>
<li>Route definitions by method</li>
<li>Route groups</li>
<li>Middleware chaining</li>
<li>Typed route parameters</li>
<li>Static file serving</li>
<li>CORS middleware</li>
</ul>
<p>Example:</p>
<pre class="language-dart"><code class="language-dart">router.get('/users/{id:int}', (req) async {
  final id = RouteParam.get&lt;int&gt;('id');
  return req.json({'id': id});
});
</code></pre>
<hr>
<h2 id="service-providers--ioc-container">Service Providers &amp; IoC Container</h2>
<p>Archery uses a provider model similar to Laravel:</p>
<pre class="language-dart"><code class="language-dart">class SomeServiceProvider extends Provider {
  @override
  void register() {
    container.bind&lt;SomeService&gt;((c) =&gt; SomeService());
  }

  @override
  void boot() {
    // Runs after all providers are registered
  }
}
</code></pre>
<p>The container supports dependency resolution across the framework.</p>
<hr>
<h2 id="authentication">Authentication</h2>
<p>Archery includes session-based authentication:</p>
<ul>
<li>Password hashing: <strong>PBKDF2-HMAC-SHA256</strong></li>
<li>Versioned hash format (<code>pbkdf2-sha256$iterations$salt$hash</code>)</li>
<li>Constant-time hash comparison</li>
<li>Login / logout helpers</li>
<li>Auth session cookie</li>
</ul>
<p>Authentication is built into the framework and integrated with sessions.</p>
<hr>
<h2 id="sessions">Sessions</h2>
<p>Archery supports:</p>
<ul>
<li>Guest sessions</li>
<li>Authenticated sessions</li>
<li>Server-side session storage</li>
<li>Cookie-based session identifiers</li>
</ul>
<p>Sessions are used for:</p>
<ul>
<li>Authentication</li>
<li>CSRF token binding</li>
<li>Flash data (if implemented)</li>
</ul>
<hr>
<h2 id="csrf-protection">CSRF Protection</h2>
<p>Archery includes CSRF middleware:</p>
<ul>
<li>Automatic token generation</li>
<li>Token stored in session</li>
<li>Token validation on state-changing requests</li>
<li><code>@csrf</code> template directive</li>
</ul>
<p>Example:</p>
<pre class="language-html"><code class="language-html">&lt;form method="POST"&gt;
  @csrf
  ...
&lt;/form&gt;
</code></pre>
<hr>
<h2 id="orm">ORM</h2>
<p>Archery includes a built-in ORM with multiple drivers:</p>
<h3 id="supported-drivers">Supported Drivers</h3>
<ul>
<li>JSON (file-based)</li>
<li>SQLite</li>
<li>Postgres</li>
<li>S3-backed model storage</li>
</ul>
<h3 id="features">Features</h3>
<ul>
<li>
<p>CRUD operations</p>
</li>
<li>
<p>Relationships:</p>
<ul>
<li><code>belongsTo</code></li>
<li><code>hasMany</code></li>
<li><code>hasOne</code></li>
</ul>
</li>
<li>
<p>Model mixins</p>
</li>
<li>
<p>Adapter-based storage abstraction</p>
</li>
</ul>
<p>Example:</p>
<pre class="language-dart"><code class="language-dart">class User extends Model {}

// uses default disk. in this e.g =&gt; .file
final user = await Model.find&lt;User&gt;(id: 1);

final user2 = await Model.find&lt;User&gt;(id: 1, disk: .sqlite);

final user3 = await Model.find&lt;User&gt;(id: 1, disk: .s3);

final user4 = await Model.find&lt;User&gt;(id: 1, disk: .pgsql);

final user5 = User(name: "Archer", email: "archer@example.com", passwprd: "password");

await user5.save();
await user5.save(disk: .sqlite);
</code></pre>
<p>Archery’s ORM is functional and production-capable, though still evolving in terms of advanced query features and edge-case coverage.</p>
<hr>
<h2 id="templating-engine">Templating Engine</h2>
<p>Blade-inspired templating:</p>
<ul>
<li>Layouts</li>
<li>Includes</li>
<li>Directives</li>
<li>Escaped output</li>
<li><code>@csrf</code> directive</li>
</ul>
<p>Designed for server-rendered applications.</p>
<hr>
<h1 id="security-model-current-state">Security Model (Current State)</h1>
<p>Archery currently provides:</p>
<ul>
<li>PBKDF2-based password hashing</li>
<li>Constant-time hash comparison</li>
<li>Session-based CSRF protection</li>
<li>HttpOnly auth cookies</li>
<li>Middleware-based request validation</li>
</ul>
<h3 id="production-recommendations">Production Recommendations</h3>
<p>When deploying:</p>
<ul>
<li>Run behind HTTPS</li>
<li>Enable secure cookie flags</li>
<li>Use Postgres for production databases</li>
<li>Configure body size limits</li>
<li>Use reverse proxy (NGINX, Caddy, etc.)</li>
</ul>
<p>Security hardening is an active focus toward the 2.0 milestone.</p>
<hr>
<h1 id="database-guidance">Database Guidance</h1>
<table>
<thead>
<tr>
<th>Driver</th>
<th>Recommended Use</th>
</tr>
</thead>
<tbody>
<tr>
<td>JSON</td>
<td>Local dev, small apps</td>
</tr>
<tr>
<td>SQLite</td>
<td>Small to medium apps</td>
</tr>
<tr>
<td>Postgres</td>
<td>Production workloads</td>
</tr>
<tr>
<td>S3</td>
<td>Backups / Experimental / Niche</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="minimal-application-example">Minimal Application Example</h1>
<pre class="language-dart"><code class="language-dart">Future&lt;void&gt; main() async {
  final app = App();
  
  await app.boot();
  
  final router = app.container.make&lt;Router&gt;();

  router.get('/', (req) async {
    return req.text('hello world');
  });


  final kernel = AppKernel(
    router: router,
  );

  try {
    HttpServer.bind(InternetAddress.loopbackIPv4, 5501).then((server) async {

      await for (HttpRequest request in server) {
        kernel.handle(request);
      }
    });
  } catch (e, stack) {
    print("Error booting server: $e\n$stack");
    await app.shutdown();
  }
  
  

}
</code></pre>
<hr>
<h1 id="production-status">Production Status</h1>
<p>Archery is currently:</p>
<p><strong>Stable Alpha / Early Production</strong></p>
<p>This means:</p>
<ul>
<li>Suitable for real deployments</li>
<li>API mostly stable</li>
<li>Internals still evolving</li>
<li>Security hardening and test expansion ongoing</li>
<li>ORM and middleware features expanding</li>
</ul>
<p>If you are building mission-critical infrastructure, evaluate carefully and follow production recommendations.</p>
<hr>
<h1 id="contributing">Contributing</h1>
<p>Archery is actively evolving. Contributions, issues, and design discussions are welcome.</p>
<hr>
<h2 id="license">License</h2>
<p><strong>BSD-3-Clause</strong>
See LICENSE file for details.</p>
</section>


      <section class="summary">
          <h2>Libraries</h2>
        <dl>
          <dt id="archery">
  <span class="name"><a href="archery_archery/">archery/archery</a></span> 

</dt>
<dd>
</dd>

          <dt id="application">
  <span class="name"><a href="archery_core_application/">archery/core/application</a></span> 

</dt>
<dd>
</dd>

          <dt id="auth_session">
  <span class="name"><a href="archery_core_auth_auth_session/">archery/core/auth/auth_session</a></span> 

</dt>
<dd>
</dd>

          <dt id="config">
  <span class="name"><a href="archery_core_config/">archery/core/config</a></span> 

</dt>
<dd>
</dd>

          <dt id="container">
  <span class="name"><a href="archery_core_container/">archery/core/container</a></span> 

</dt>
<dd>
</dd>

          <dt id="extensions">
  <span class="name"><a href="archery_core_http_extensions/">archery/core/http/extensions</a></span> 

</dt>
<dd>
</dd>

          <dt id="form_request">
  <span class="name"><a href="archery_core_http_form_request/">archery/core/http/form_request</a></span> 

</dt>
<dd>
</dd>

          <dt id="http">
  <span class="name"><a href="archery_core_http_http/">archery/core/http/http</a></span> 

</dt>
<dd>
</dd>

          <dt id="cors_middleware">
  <span class="name"><a href="archery_core_http_middleware_cors_middleware/">archery/core/http/middleware/cors_middleware</a></span> 

</dt>
<dd>
</dd>

          <dt id="csrf_middleware">
  <span class="name"><a href="archery_core_http_middleware_csrf_middleware/">archery/core/http/middleware/csrf_middleware</a></span> 

</dt>
<dd>
</dd>

          <dt id="session_middleware">
  <span class="name"><a href="archery_core_http_middleware_session_middleware/">archery/core/http/middleware/session_middleware</a></span> 

</dt>
<dd>
</dd>

          <dt id="router">
  <span class="name"><a href="archery_core_http_router/">archery/core/http/router</a></span> 

</dt>
<dd>
</dd>

          <dt id="uploaded_file">
  <span class="name"><a href="archery_core_http_uploaded_file/">archery/core/http/uploaded_file</a></span> 

</dt>
<dd>
</dd>

          <dt id="kernel">
  <span class="name"><a href="archery_core_kernel/">archery/core/kernel</a></span> 

</dt>
<dd>
</dd>

          <dt id="logger">
  <span class="name"><a href="archery_core_logger/">archery/core/logger</a></span> 

</dt>
<dd>
</dd>

          <dt id="hasher">
  <span class="name"><a href="archery_core_orm_hasher/">archery/core/orm/hasher</a></span> 

</dt>
<dd>
</dd>

          <dt id="json_file_model">
  <span class="name"><a href="archery_core_orm_json_file_model/">archery/core/orm/json_file_model</a></span> 

</dt>
<dd>
</dd>

          <dt id="model">
  <span class="name"><a href="archery_core_orm_model/">archery/core/orm/model</a></span> 

</dt>
<dd>
</dd>

          <dt id="postgres_model">
  <span class="name"><a href="archery_core_orm_postgres_model/">archery/core/orm/postgres_model</a></span> 

</dt>
<dd>
</dd>

          <dt id="s3_json_file_model">
  <span class="name"><a href="archery_core_orm_s3_json_file_model/">archery/core/orm/s3_json_file_model</a></span> 

</dt>
<dd>
</dd>

          <dt id="sqlite_model">
  <span class="name"><a href="archery_core_orm_sqlite_model/">archery/core/orm/sqlite_model</a></span> 

</dt>
<dd>
</dd>

          <dt id="provider">
  <span class="name"><a href="archery_core_provider/">archery/core/provider</a></span> 

</dt>
<dd>
</dd>

          <dt id="static_files_server">
  <span class="name"><a href="archery_core_static_files_server/">archery/core/static_files_server</a></span> 

</dt>
<dd>
</dd>

          <dt id="template_engine">
  <span class="name"><a href="archery_core_template_engine/">archery/core/template_engine</a></span> 

</dt>
<dd>
</dd>

          <dt id="s3_client">
  <span class="name"><a href="archery_packages_s3_client/">archery/packages/s3_client</a></span> 

</dt>
<dd>
</dd>

        </dl>
      </section>
  </div> <!-- /.main-content -->
  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <!-- The search input and breadcrumbs below are only responsively visible at low resolutions. -->
<header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>
<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
    <li class="self-crumb">archery package</li>
</ol>

    <h5 class="hidden-xs"><span class="package-name">archery</span> <span class="package-kind">package</span></h5>
    <ol>
      <li class="section-title">Libraries</li>
      <li><a href="archery_archery/">archery/archery</a></li>
      <li><a href="archery_core_application/">archery/core/application</a></li>
      <li><a href="archery_core_auth_auth_session/">archery/core/auth/auth_session</a></li>
      <li><a href="archery_core_config/">archery/core/config</a></li>
      <li><a href="archery_core_container/">archery/core/container</a></li>
      <li><a href="archery_core_http_extensions/">archery/core/http/extensions</a></li>
      <li><a href="archery_core_http_form_request/">archery/core/http/form_request</a></li>
      <li><a href="archery_core_http_http/">archery/core/http/http</a></li>
      <li><a href="archery_core_http_middleware_cors_middleware/">archery/core/http/middleware/cors_middleware</a></li>
      <li><a href="archery_core_http_middleware_csrf_middleware/">archery/core/http/middleware/csrf_middleware</a></li>
      <li><a href="archery_core_http_middleware_session_middleware/">archery/core/http/middleware/session_middleware</a></li>
      <li><a href="archery_core_http_router/">archery/core/http/router</a></li>
      <li><a href="archery_core_http_uploaded_file/">archery/core/http/uploaded_file</a></li>
      <li><a href="archery_core_kernel/">archery/core/kernel</a></li>
      <li><a href="archery_core_logger/">archery/core/logger</a></li>
      <li><a href="archery_core_orm_hasher/">archery/core/orm/hasher</a></li>
      <li><a href="archery_core_orm_json_file_model/">archery/core/orm/json_file_model</a></li>
      <li><a href="archery_core_orm_model/">archery/core/orm/model</a></li>
      <li><a href="archery_core_orm_postgres_model/">archery/core/orm/postgres_model</a></li>
      <li><a href="archery_core_orm_s3_json_file_model/">archery/core/orm/s3_json_file_model</a></li>
      <li><a href="archery_core_orm_sqlite_model/">archery/core/orm/sqlite_model</a></li>
      <li><a href="archery_core_provider/">archery/core/provider</a></li>
      <li><a href="archery_core_static_files_server/">archery/core/static_files_server</a></li>
      <li><a href="archery_core_template_engine/">archery/core/template_engine</a></li>
      <li><a href="archery_packages_s3_client/">archery/packages/s3_client</a></li>
</ol>

  </div>
  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
  </div>
</main>
<footer>
  <span class="no-break">
    archery
      1.4.1
  </span>
  
</footer>


<script src="static-assets/highlight.pack.js?v1"></script>
<script src="static-assets/docs.dart.js"></script>

</body>
</html>

